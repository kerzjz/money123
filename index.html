<!doctype html>
<head>
<title>Money123 by Ker ZJZ</title>
<link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css">
<script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script>
</head>
<body>
<!-- 标签栏 -->
<div class="mdui-tab" mdui-tab>
  <bold>Money123 by Ker ZJZ</bold>
  <a href="#example1-tab1" class="mdui-ripple">Gold</a>
  <a href="#example1-tab2" class="mdui-ripple">Sec</a>
  <a href="#example1-tab3" class="mdui-ripple">Pizzint</a>
  <a href="#example1-tab4" class="mdui-ripple">RSS</a>
  <a href="#example1-tab5" class="mdui-ripple">Clac</a>
</div>

<!-- 黄金价格 -->
<div id="example1-tab1" class="mdui-p-a-2">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    .gold-price-container {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1000px;
      margin: 30px auto;
      padding: 30px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .gold-header {
      text-align: center;
      margin-bottom: 30px;
      color: #d4af37;
    }
    .gold-header h2 { font-size: 2rem; margin-bottom: 10px; }
    .update-time { color: #777; font-size: 0.9rem; }
    .gold-price-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }
    .gold-item {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      border: 1px solid #eee;
      transition: all 0.3s ease;
    }
    .gold-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    .gold-item h3 {
      color: #d4af37;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .price {
      font-size: 1.8rem;
      font-weight: bold;
      margin: 10px 0;
      color: #2c3e50;
    }
    .change {
      padding: 5px 12px;
      border-radius: 20px;
      font-weight: bold;
      display: inline-block;
      margin: 5px 0;
    }
    .positive { background: rgba(231, 76, 60, 0.1); color: #e74c3c; }
    .negative { background: rgba(46, 204, 113, 0.1); color: #2ecc71; }
    .detail {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #eee;
      color: #777;
      font-size: 0.9rem;
    }
    .loader { text-align: center; padding: 40px 0; }
    .spinner {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #d4af37;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @media (max-width: 768px) { .gold-price-grid { grid-template-columns: 1fr; } }
  </style>

  <div class="gold-price-container">
    <div class="gold-header">
      <h2><i class="fas fa-coins"></i> 实时黄金价格</h2>
      <div class="update-time" id="updateTime">正在获取数据...</div>
    </div>
    <div id="goldData">
      <div class="loader">
        <div class="spinner"></div>
        <p>正在获取黄金价格数据...</p>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      fetch('https://api.pearktrue.cn/api/goldprice/')
        .then(r => r.json())
        .then(d => {
          if (d.code === 200) {
            let html = '<div class="gold-price-grid">';
            d.data.forEach(item => {
              const cls = item.changepercent.startsWith('+') ? 'positive' : 'negative';
              html += `
                <div class="gold-item">
                  <h3><i class="fas fa-gem"></i> ${item.title}</h3>
                  <div class="price">${item.price}</div>
                  <div class="change ${cls}">${item.changepercent}</div>
                  <div class="detail">
                    <span>最高: ${item.maxprice}</span>
                    <span>最低: ${item.minprice}</span>
                  </div>
                </div>`;
            });
            html += '</div>';
            document.getElementById('goldData').innerHTML = html;
            document.getElementById('updateTime').textContent = `更新时间: ${d.time}`;
          } else {
            document.getElementById('goldData').innerHTML =
              `<div style="text-align:center;padding:30px;color:#e74c3c;">
                <i class="fas fa-exclamation-triangle"></i> 获取数据失败: ${d.msg}
              </div>`;
          }
        })
        .catch(e => {
          document.getElementById('goldData').innerHTML =
            `<div style="text-align:center;padding:30px;color:#e74c3c;">
              <i class="fas fa-exclamation-triangle"></i> 请求失败: ${e.message}
            </div>`;
        });
    });
  </script>
</div>

<!-- 股票 -->
<div id="example1-tab2" class="mdui-p-a-2">
  <style>
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f2f2f2; }
    .result-container { margin-top: 20px; }
  </style>

  <h1>股票</h1>
  <label for="secidInput">请输入股票代码</label>
  <input type="text" id="secidInput" placeholder="例如: 300033">
  <br><br>
  <button id="postRequestButton">发送POST请求</button>
  <br><br>
  <button id="getRequestButton">发送GET请求</button>
  <br><br>
  <div id="result" class="result-container"></div>

  <script>
    const postBtn = document.getElementById('postRequestButton');
    const getBtn  = document.getElementById('getRequestButton');
    const result  = document.getElementById('result');
    const input   = document.getElementById('secidInput');

    const keyMap = {
      secid: '股票代码', num: '数量', name: '股票名称',
      opening: '开盘', closing: '收盘', lowest: '最低',
      highest: '最高', trading_volume: '成交量', turnover: '成交额',
      amplitude: '振幅', inorde: '涨跌幅', inorde_amount: '涨跌额',
      turnover_rate: '换手率', time: '时间', data: '数据',
      code: '__HIDDEN__', msg: '__HIDDEN__', api_source: '__HIDDEN__'
    };
    const hide = k => keyMap[k] === '__HIDDEN__';

    function clear() { result.innerHTML = ''; }

    function buildTable(arr) {
      const table = document.createElement('table');
      const keys  = Object.keys(arr[0]).filter(k => !hide(k));
      const head  = document.createElement('tr');
      keys.forEach(k => { const th = document.createElement('th'); th.textContent = keyMap[k] || k; head.appendChild(th); });
      table.appendChild(head);
      arr.forEach(item => {
        const tr = document.createElement('tr');
        keys.forEach(k => { const td = document.createElement('td'); td.textContent = item[k]; tr.appendChild(td); });
        table.appendChild(tr);
      });
      return table;
    }

    function buildObj(obj) {
      const table = document.createElement('table');
      const head = document.createElement('tr');
      ['字段','值'].forEach(t => { const th = document.createElement('th'); th.textContent = t; head.appendChild(th); });
      table.appendChild(head);
      Object.keys(obj).filter(k => !hide(k)).forEach(k => {
        const tr = document.createElement('tr');
        const td1 = document.createElement('td'); td1.textContent = keyMap[k] || k;
        const td2 = document.createElement('td'); td2.textContent = JSON.stringify(obj[k],null,2);
        tr.appendChild(td1); tr.appendChild(td2); table.appendChild(tr);
      });
      return table;
    }

    function render(data) {
      clear();
      if (Array.isArray(data)) result.appendChild(buildTable(data));
      else if (typeof data === 'object') result.appendChild(buildObj(data));
      else { const p = document.createElement('p'); p.textContent = data; result.appendChild(p); }
    }

    postBtn.addEventListener('click', () => {
      const v = input.value.trim();
      if (!v) return alert('请输入股票代码！');
      fetch('https://api.pearktrue.cn/api/stock/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ secid: v, num: '100' })
      }).then(r => r.json()).then(render).catch(e => { clear(); const p = document.createElement('p'); p.style.color = 'red'; p.textContent = `请求失败: ${e}`; result.appendChild(p); });
    });

    getBtn.addEventListener('click', () => {
      const v = input.value.trim();
      if (!v) return alert('请输入股票代码！');
      fetch(`https://api.pearktrue.cn/api/stock/?secid=${v}&num=100`)
        .then(r => r.json()).then(render).catch(e => { clear(); const p = document.createElement('p'); p.style.color = 'red'; p.textContent = `请求失败: ${e}`; result.appendChild(p); });
    });
  </script>
</div>

<!-- 占位 -->
<div id="example1-tab3" class="mdui-p-a-2">images content</div>
<div id="example1-tab4" class="mdui-p-a-2"></div>

<!-- 理财计算器 -->
<div id="example1-tab5" class="mdui-p-a-2">
  <style>
    .wrap { max-width: 600px; margin: 0 auto; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif; }
    .card { background: #fff; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,.08); padding: 24px; margin-bottom: 20px; }
    .card h2 { margin: 0 0 16px; display: flex; align-items: center; gap: 8px; }
    .icon { background: #1976d2; color: #fff; width: 28px; height: 28px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 16px; }
    .input-group { display: flex; align-items: center; margin: 10px 0; }
    .input-group input { flex: 1; padding: 8px 10px; border: 1px solid #ddd; border-radius: 4px 0 0 4px; }
    .unit { background: #f5f5f5; padding: 8px 10px; border: 1px solid #ddd; border-left: 0; border-radius: 0 4px 4px 0; font-size: 14px; }
    button { background: #1976d2; color: #fff; border: 0; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 8px; }
    button:hover { opacity: .9; }
    .result { margin-top: 8px; font-weight: bold; }
  </style>

  <div class="wrap">
    <div class="card">
      <h2><span class="icon">算</span>理财计算器</h2>

      <h3>① 计算利息</h3>
      <div class="input-group">
        <input id="p1" type="number" placeholder="本金（元）">
        <span class="unit">元</span>
      </div>
      <div class="input-group">
        <input id="r7" type="number" placeholder="七日年化（%）" step="0.01">
        <span class="unit">%</span>
      </div>
      <div class="input-group">
        <input id="days" type="number" placeholder="持有天数（空=1）">
        <span class="unit">天</span>
      </div>
      <button onclick="calcInterest()">计算利息</button>
      <div id="intRes" class="result"></div>

      <h3 style="margin-top:15px;">② 反算七日年化</h3>
      <div class="input-group">
        <input id="p2" type="number" placeholder="本金（元）">
        <span class="unit">元</span>
      </div>
      <div class="input-group">
        <input id="earn7" type="number" placeholder="七日总收益（元）" step="0.01">
        <span class="unit">元</span>
      </div>
      <button onclick="calcAPR()">计算七日年化</button>
      <div id="aprRes" class="result"></div>
    </div>
  </div>

  <script>
    function calcInterest() {
      const p = Number(document.getElementById('p1').value);
      const r = Number(document.getElementById('r7').value);
      const d = Number(document.getElementById('days').value) || 1;
      if (!p || !r) return document.getElementById('intRes').textContent = '请填写完整';
      const interest = (p * r / 100 / 365 * d).toFixed(2);
      document.getElementById('intRes').textContent = `${d}天收益：${interest} 元`;
    }
    function calcAPR() {
      const p = Number(document.getElementById('p2').value);
      const e = Number(document.getElementById('earn7').value);
      if (!p || !e) return document.getElementById('aprRes').textContent = '请填写完整';
      const apr = (e / p * 365 / 7 * 100).toFixed(2);
      document.getElementById('aprRes').textContent = `七日年化：${apr} %`;
    }
  </script>
</div>
</body>
</html>